\subsection{AD-00-00: Installation of the Alert Distribution payloads.}
\label{ad-00-00}

\subsubsection{Requirements}

DMS-REQ-0308.

\subsubsection{Test items}

This test will check:

\begin{itemize}

  \item{That the Alert Distribution payloads are available 
  from documented channels;}

  \item{That the Alert Distribution payloads can be installed on
  LSST Data Facility-managed systems.}

  \item{That the Alert Distribution payloads can be executed by
  LSST Data Facility-managed systems.}

\end{itemize}

\subsubsection{Intercase dependencies}

None.

\subsubsection{Environmental needs}

\paragraph{Hardware}

This test case shall be executed on the \textit{Kubernetes Commons} at the LDF. 
As discussed in https://dmtn-028.lsst.io/, the test machine should have at least 64 GB of memory and access to at least 1.5 TB of shared storage.

\paragraph{Software}

No software outside of the components to be installed in this case are required.

\subsubsection{Input specification}

No input data is required for this test case.

\subsubsection{Output specification}

The Alert Distribution payloads will be executed by the 
filesystem accessible from LSST-VC compute notes.

\subsubsection{Procedure}

\begin{enumerate}


	\item{Download Kafka Docker image from \url{https://github.com/lsst-dm/alert\_stream}.}
\textbf{Need to test whether this single-host setup works for Kubernetes:}
	\item{From the \texttt{alert\_stream} directory, bring up the container networking: \texttt{\$ docker-compose up -d}}
	\item{Build the docker containers: \texttt{\$ docker build -t "alert\_stream" .}}
	\item{Confirm that the payload can execute: \texttt{\$ docker run -it alert\_stream python bin/sendAlertStream.py -h}.  A help string should be printed to the terminal.}


	\item{Download mini-broker Docker image?  It may be included in \texttt{alert\_stream} above}
	\item{Download Docker image for consumers?  Probably also in \texttt{alert\_stream}}

\end{enumerate}
